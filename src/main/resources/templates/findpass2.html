<html xmlns="http://www.w3.org/1999/xhtml">
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>找回密码</title>
    <link href="css/top.css" rel="stylesheet" type="text/css"/>
    <link href="css/index.css" rel="stylesheet" type="text/css"/>
    <link href="css/login.css" rel="stylesheet" type="text/css"/>
    <link href="css/bottom.css" rel="stylesheet" type="text/css"/>
    <script src="js/jquery.min.js"></script>
    <script src="js/layer.js"></script>
    <style type="text/css" rel="stylesheet">
        .green {
            color: green;
        }

        .red {
            color: red;
        }
    </style>
</head>
<body>
<div class="nav">
    <div class="nav_content">
        <div class="user">
            <div class="userlogo">
                <img src="images/icon-user_47dae1a.jpg">
                <div class="user_meua">
                    <th:if th:if="${session.userinfoLogins==null}">
                        <a th:href="@{/Regedit}">立刻注册</a>
                        <a th:href="@{/login}">立刻登录</a>
                        <a href="#">帮助与反馈</a>
                        <a href="#">联系我们</a>
                    </th:if>
                    <th:if th:if="${session.userinfoLogins!=null}">
                        <div>
                            <a th:href="@{/goToUserCenter}">尊敬的 <b th:text="${session.userinfoLogins.userName}"></b></a>
                            <a th:href="@{/goToUserCenter}">我的资料</a>
                            <a th:href="@{/order}">我的订单</a>
                            <a th:href="@{/findShopList(userId=${session.userinfoLogins.id},pageNum=1)}">我的购物车</a>
                            <a th:href="@{/Publishgoods}">我发布的商品</a>
                            <a th:href="@{/login2}">退出登陆</a>
                        </div>
                    </th:if>
                </div>
            </div>
            <div class="search">
                <form method="post" th:action="@{/findGoodsInfoName}">
                    <input placeholder="搜索商品" required="true" name="name" type="text" id="myword">
                    <input type="image" src="images/search.png"
                           style="float:right;margin-top:6px; margin-right:6px;width:20px;height:20px;"></form>
            </div>
        </div>
        <ul class="nav_link">
            <li><img src="images/web.gif" style="width: 200px;height:80px;margin-left: -600px;margin-top: -10px"/>
            </li>
            <li>
                <th:if th:if="${session.userinfoLogins==null}">
                    <a th:href="@{/index}">首页</a>
                </th:if>
                <th:if th:if="${session.userinfoLogins!=null}">
                    <a th:href="@{'/index?userId='+${session.userinfoLogins.id}}">首页</a>
                </th:if>
            <li>
                <a th:href="@{/findWantGoodsAll}">求购商品</a>
            </li>
            <li>
                <th:if th:if="${session.userinfoLogins!=null}">
                    <a th:href="@{/goToUserCenter}">用户中心</a>
                </th:if>
                <th:if th:if="${session.userinfoLogins==null}">
                    <a th:href="@{/login}">用户中心</a>
                </th:if>
            </li>
            <li>
                <th:if th:if="${session.userinfoLogins!=null}">
                    <a th:href="@{/findBrowser(userId=${session.userinfoLogins.id},pageNum=1)}">我的足迹</a>
                </th:if>
                <th:if th:if="${session.userinfoLogins==null}">
                    <a th:href="@{/login}">我的足迹</a>
                </th:if>
            </li>
        </ul>
    </div>
</div>
<!--==========================================================================================-->
<div class="common">
    <h3>填写邮件验证码</h3>

    <div class="user_bottom" style="border:1px solid #ccc;border-radius:4px;">
        <!--<form id=theForm name="theForm" th:action="findpass3" th:method="post" action="findpass3.html"-->
        <!--method="post" onSubmit="return Juge(this)">-->
        <!--<div class="form_common">-->
        <!--<label>用户名</label>-->
        <!--<input type="text" name="username" value="user" readonly>-->
        <!--</div>-->
        <input type="hidden" id="q" th:value="${QQ}"/>
        <div class="form_common">
            <label>请点击获取验证码</label>
            <input type="text" style="font-size: 14px;color: black" th:value="'您的QQ邮箱是'+${QQ}" readonly="readonly"
                   class="qq"
                   name="qq">
        </div>
        <div class="form_common" style="display: block" id="num">
            <label>验证码</label>
            <input type="text" name="verifycode" placeholder="验证码"
                   id="yzm" style="width: 150px;float:left;margin-left: 20px">
            <input type="button" id="count" onclick="SendMessage()"
                   style="width:100px;float:right;border-radius:4px;cursor:pointer; background:#33CFF7;"
                   value="获取验证码">
        </div>
        <div class="form_common">
            <div>
                <input type="submit" id="xyb" style="border-radius:4px;cursor:pointer; background:#33CFF7;"
                       value="下一步"/>
                <span id="xsyzm"></span>
            </div>
        </div>
        <!--</form>-->
    </div>

    <div class="xian">

    </div>
</div>
<!--=======================================================================-->
<div class="footer">
    <div class="footer_content">
        <ul class="footer_item">
            <li>联系方式：</li>
            <li class="tit">15979675043</li>
            <li class="tit">1730548276@qq.com</li>
        </ul>

        <ul class="footer_item">
            <li>购物指南</li>

            <li><a href="#">选择配送方式</a></li>

            <li><a href="#">付款收货</a></li>

            <li><a href="#">挑选商品</a></li>

        </ul>

        <ul class="footer_item">
            <li>送货说明</li>

            <li><a href="#">购物流程</a></li>

            <li><a href="#">订购方式</a></li>

            <li><a href="#">注意事项</a></li>

        </ul>

        <ul class="footer_item">
            <li>支付方式</li>

            <li><a href="javascript:void(0)">货到付款区域</a></li>

            <li><a href="javascript:void(0)">支付方式说明</a></li>

            <li><a href="javascript:void(0)">货到付款</a></li>

        </ul>

        <ul class="footer_item">
            <li>服务政策</li>

            <li><a href="javascript:void(0)">售后服务</a></li>

            <li><a href="javascript:void(0)">退换货原则</a></li>

            <li><a href="javascript:void(0)">其他服务协议</a></li>

        </ul>

        <ul class="footer_item">
            <li>关于我们</li>

            <li><a href="javascript:void(0)">关于我们</a></li>

            <li><a href="javascript:void(0)">如何联系我们</a></li>

            <li><a href="javascript:void(0)">合作加盟</a></li>
        </ul>
    </div>
</div>
<div class="Shop7z_kefu">
    <div id="service">
        <ul>
            <li>
                <a href="javascript:void(0)" class="weixin_area">
                    <img src="images/l02.png" width="47" height="49" class="shows"/>
                    <img src="images/a.png" width="57" height="49" class="hides"/>
                    <img src="images/qd.png" width="145" class="weixin"
                         style="display:none;margin:-100px 57px 0 0"/>
                </a>
            </li>
            <li>
                <a href="javascript:void(0)" target="_blank">
                    <div class="hides" style="width:161px;display:none;" id="qq">
                        <div class="hides" id="p1">
                            <img src="images/ll04.png"/>
                        </div>
                        <div class="hides" id="p2"><span style="color:#FFF;font-size:13px">1599428958</span>
                        </div>
                    </div>
                    <img src="images/l04.png" width="47" height="49" class="shows"/>
                </a>
            </li>
            <li>
                <a href="javascript:void(0)">
                    <div class="hides" style="width:161px;display:none;">
                        <div class="hides" id="p1">
                            <img src="images/ll05.png"/>
                        </div>
                        <div class="hides" id="p3"><span style="color:#FFF;font-size:12px">12345678991</span>
                        </div>
                    </div>
                    <img src="images/l05.png" width="47" height="49" class="shows"/>
                </a>
            </li>
            <li>
                <a id="top_btn">
                    <div class="hides" style="width:161px;display:none">
                        <img src="images/ll06.png" width="161" height="49"/>
                    </div>
                    <img src="images/l06.png" width="47" height="49" class="shows"/>
                </a>
            </li>
        </ul>
    </div>
</div>
<script src="css/user.js"></script>
<div style="display:none;">
    <script src="http://s22.cnzz.com/stat.php?id=4125111&web_id=4125111&show=pic" language="JavaScript"></script>
</div>
<script type="text/javascript">
    $(function () {
        $("#xyb").click(function () {
            var yzm = $("#xsyzm").val();
            var count = $("#yzm").val();
            if (yzm == count) {
                window.location.href = "/findpass3";
            } else {
                alert("验证码输入错误");
            }
        });
    });
    var InterValObj; //timer变量，控制时间
    var count = 60; //间隔函数，1秒执行
    var curCount; //当前剩余秒数
    var yzm = ""; //验证码
    function SendMessage() {
        $.ajax({
            url: "send",
            type: "GET",
            data: {"qq": $("#q").val()},
            dataType: "json",
            success: function (data) {
                if (data == "0") {
                    alert("QQ邮箱输入错误，请重新输入!");
                } else {
                    $("#xsyzm").val(data);
                }
                $("input[type='submit']").click(function () {
                    if ($("#yzm").val() == "" || $("#yzm").val() == null) {
                        $("#yzm").next().html("验证码不能为空");
                        $("#yzm").next().removeClass("green");
                        $("#yzm").next().addClass("red");
                        return false;
                    } else {
                        if (data != $("#yzm").val()) {
                            $("#yzm").next().html("验证码错误");
                            $("#yzm").next().removeClass("green");
                            $("#yzm").next().addClass("red");
                            return false;
                        } else {
                            $("#yzm").next().html("");
                            window.location.href = "findpass3";
                            return true;
                        }
                    }
                });
            },
            error: function () {
                alert("出现异常请联系管理员");
            },
        });
        curCount = count;
        //设置button效果，开始计时
        $("#count").attr("disabled", "true");
        $("#count").val(curCount + "秒后重新获取");
        InterValObj = window.setInterval(SetRemainTimes, 1000); //启动计时器，1秒执行一次
    }
    //timer处理函数
    function SetRemainTimes() {
        if (curCount == 0) {
            window.clearInterval(InterValObj); //停止计时器
            $("#count").removeAttr("disabled"); //启用按钮
            $("#count").val("重新发送验证码");
            yzm = $("#yzm").val(" "); //清除验证码。如果不清除，过时间后，输入收到的验证码依然有效
        } else {
            curCount--;
            $("#count").val(curCount + "秒后重新获取");
        }
    }
</script>
</body>
</html>

